"use strict";module.exports=function(t){var i=/\s+/,s=Array.prototype.slice;t.Events={on:function(t,s,n){var l,e,a,c,r;if(!s)return this;for(t=t.split(i),l=this._callbacks||(this._callbacks={}),e=t.shift();e;)r=l[e],a=r?r.tail:{},a.next=c={},a.context=n,a.callback=s,l[e]={tail:c,next:r?r.next:a},e=t.shift();return this},off:function(t,s,n){var l,e,a,c,r,f;if(e=this._callbacks){if(!(t||s||n))return delete this._callbacks,this;for(t=t?t.split(i):_.keys(e),l=t.shift();l;)if(a=e[l],delete e[l],a&&(s||n)){for(c=a.tail,a=a.next;a!==c;)r=a.callback,f=a.context,(s&&r!==s||n&&f!==n)&&this.on(l,r,f),a=a.next;l=t.shift()}return this}},trigger:function(t){var n,l,e,a,c,r,f;if(!(e=this._callbacks))return this;for(r=e.all,t=t.split(i),f=s.call(arguments,1),n=t.shift();n;){if(l=e[n])for(a=l.tail;(l=l.next)!==a;)l.callback.apply(l.context||this,f);if(l=r)for(a=l.tail,c=[n].concat(f);(l=l.next)!==a;)l.callback.apply(l.context||this,c);n=t.shift()}return this}},t.Events.bind=t.Events.on,t.Events.unbind=t.Events.off};