"use strict";var _=require("underscore");module.exports=function(e){e.Cloud=e.Cloud||{},_.extend(e.Cloud,{run:function(n,r,u){var t=e._request("functions",n,null,"POST",e._encode(r,null,!0));return t.then(function(n){return e._decode(null,n).result})._thenRunCallbacks(u)},rpc:function(n,r,u){return _.isArray(r)?e.Promise.error(new Error("Can't pass Array as the param of rpc function in JavaScript SDK."))._thenRunCallbacks(u):e._request("call",n,null,"POST",e._encodeObjectOrArray(r)).then(function(n){return e._decode("",n).result})._thenRunCallbacks(u)},getServerDate:function(n){var r=e._request("date",null,null,"GET");return r.then(function(n){return e._decode(null,n)})._thenRunCallbacks(n)},requestSmsCode:function(n,r){if(_.isString(n)&&(n={mobilePhoneNumber:n}),!n.mobilePhoneNumber)throw"Missing mobilePhoneNumber.";var u=e._request("requestSmsCode",null,null,"POST",n);return u._thenRunCallbacks(r)},verifySmsCode:function(n,r,u){if(!n)throw"Missing sms code.";var t={};e._.isString(r)?t.mobilePhoneNumber=r:u=r;var l=e._request("verifySmsCode",n,null,"POST",t);return l._thenRunCallbacks(u)}})};